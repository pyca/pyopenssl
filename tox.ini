[tox]
envlist = pypy,py26,py27,py32,py33

[testenv]
deps =
     # Only required to build wheels as part of test cycle:
     wheel==0.23.0
     coverage==3.7.1
setenv =
    # Do not allowed the executing environment to pollute the test environment
    # with extra packages.
    PYTHONPATH=
commands =
    # The standard library unittest module can run tests on Python 2.7 and newer
    coverage run --branch --source=OpenSSL setup.py test
    coverage report --show-missing
    python setup.py bdist_wheel
    python -c "import OpenSSL.SSL; print(OpenSSL.SSL.SSLeay_version(OpenSSL.SSL.SSLEAY_VERSION))"

[testenv:pypy]
basepython = pypy
deps =
    {[testenv]deps}
    cryptography==0.4

[testenv:py26]
basepython = python2.6
deps =
    {[testenv]deps}
    cryptography==0.4

[testenv:py27]
basepython = python2.7
deps =
    {[testenv]deps}
    cryptography==0.4

[testenv:py32]
basepython = python3.2
deps =
    {[testenv]deps}
    cryptography==0.4

[testenv:py33]
basepython = python3.3
deps =
    {[testenv]deps}
    cryptography==0.4

[testenv:pypy-cryptographymaster]
basepython = pypy
deps =
    {[testenv]deps}
    -egit+https://github.com/pyca/cryptography.git#egg=cryptography

[testenv:py26-cryptographymaster]
basepython = python2.6
deps =
    {[testenv]deps}
    -egit+https://github.com/pyca/cryptography.git#egg=cryptography

[testenv:py27-cryptographymaster]
basepython = python2.7
deps =
    {[testenv]deps}
    -egit+https://github.com/pyca/cryptography.git#egg=cryptography

[testenv:py32-cryptographymaster]
basepython = python3.2
deps =
    {[testenv]deps}
    -egit+https://github.com/pyca/cryptography.git#egg=cryptography

[testenv:py33-cryptographymaster]
basepython = python3.3
deps =
    {[testenv]deps}
    -egit+https://github.com/pyca/cryptography.git#egg=cryptography
